<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>wrapper example</title>
  <meta name="description" content="wrapper example"></meta>
  <script type="text/javascript">
  // copied from td-js-sdk/examples/wrapper/dist/loader.js
  (function(n,c){
    if (c[n] === void 0) {

      c[n] = function () {
        c[n].clients.push(this);
        this._init = [Array.prototype.slice.call(arguments)];
      };
      c[n].clients = [];

      var action = function(method){
        return function () {
          this['_'+method] = this['_'+method] || [];
          this['_'+method].push(Array.prototype.slice.call(arguments));
          return this;
        };
      };

      var methods = ['addRecord', 'set', 'trackEvent', 'trackPageview', 'ready'];
      for (var i = 0; i < methods.length; i++){
        var method = methods[i];
        c[n].prototype[method] = action(method);
      }

      var s = document.createElement('script');
      s.type = 'text/javascript';
      s.async = !0;

      // s.src = ('https:' === document.location.protocol ? 'https:' : 'http:') + '//example.js';
      s.src = '/dist/example.js'; // manually replaced with absolute url for this example

      var t = document.getElementsByTagName('script')[0];
      t.parentNode.insertBefore(s,t);
    }
  })('Example', this);

  </script>
</head>
<body>

<script type="text/javascript">
(function () {
  'use strict';

  function setBackground(color) {
    document.body.style.background = color;
  }

  function setStatus (text) {
    document.getElementById('status').innerHTML = text;
  }

  var example = new Example({writeKey: 'writeKey'});

  document.addEventListener('DOMContentLoaded', function () {
    setTimeout(function () {
      // checked in a timeout because real Example is loaded async
      var validHost = example.client.host === 'in.example.com';
      var validDatabase = example.client.database === 'example';
      setBackground(validHost && validDatabase ? 'green' : 'red');

      var status = '';
      status += 'host: ' + example.client.host;
      status += '</br>';
      status += 'database: ' + example.client.database;
      setStatus(status);
    }, 1000);
  });

})();
</script>

<h1>WRAPPER EXAMPLE</h1>
<h1 id='status' style="text-align: center;">running</h1>

</body>
</html>

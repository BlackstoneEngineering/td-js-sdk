<script type="text/javascript">
    !function(a,b){if(void 0===b[a]){b["_"+a]={},b[a]=function(c){b["_"+a].clients=b["_"+a].clients||{},b["_"+a].clients[c.database]=this,this._config=c},b[a].ready=function(c){b["_"+a].ready=b["_"+a].ready||[],b["_"+a].ready.push(c)};for(var c=["addEvent","setGlobalProperties","trackExternalLink","on"],d=0;d<c.length;d++){var e=c[d],f=function(a){return function(){return this["_"+a]=this["_"+a]||[],this["_"+a].push(arguments),this}};b[a].prototype[e]=f(e)}var g=document.createElement("script");g.type="text/javascript",g.async=!0,g.src="/dist/td-js-sdk.js";var h=document.getElementsByTagName("script")[0];h.parentNode.insertBefore(g,h)}}("Treasure",this);

    var treasure = new Treasure({
      database: 'test_db_1',
      writeKey: '91/96da3cfb876cc50724d0dddef670d95eea2a0018',
      host: 'in-staging.treasuredata.com'
    });
</script>

<script type="text/javascript">
  function trackSubmit(e) {
    treasure.addEvent("submits", { time: new Date().getTime(), foo: 'foo' }, function() {
      document.forms[0].submit();
    });
  }
</script>

<form method="POST" action="http://foo.com" onsubmit="trackSubmit(); return false;">
  <input type="submit" value="submit">
</form>
